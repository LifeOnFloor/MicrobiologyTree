# 🎨 表示形式の切り替え機能

## 新機能！画面上で表示形式を切り替え

以前はHTMLファイルを編集する必要がありましたが、**今は画面上のボタンで簡単に切り替えられます！**

## 📍 機能の場所

画面上部のヘッダーに3つのボタンがあります：

```
🦠 Microbiology Tree
微生物分類の可視化

[⭕ サークル] [➡️ 水平] [📋 折りたたみ] [🔄 リセット] [❓ ヘルプ]
```

## 🎯 3つの表示形式

### 1. ⭕ サークル形式（デフォルト）

**特徴：**
- 放射状のツリー表示
- 全体像を一目で把握
- 美しいビジュアル
- 大規模なデータに適している

**使用場面：**
- 初めて見るとき
- プレゼンテーション
- 全体の構造を理解したいとき

### 2. ➡️ 水平形式

**特徴：**
- 左から右へ展開
- 階層構造が明確
- 読みやすい
- 詳細な分類を確認するのに最適

**使用場面：**
- 詳細な階層を確認したいとき
- 特定の分類経路を追いたいとき
- 印刷やスクリーンショット

### 3. 📋 折りたたみ形式

**特徴：**
- ノードをクリックして自由に展開/折りたたみ
- 必要な部分だけ表示
- シンプルで軽量
- 探索的な使い方に適している

**使用場面：**
- 特定の微生物を探しているとき
- 段階的に情報を確認したいとき
- モバイルデバイスで使用するとき

## 💾 自動保存機能

選択した表示形式は**自動的にブラウザに保存**されます。

- 次回訪問時も同じ形式で表示
- ブラウザのローカルストレージを使用
- プライバシーに配慮（データはあなたのブラウザのみに保存）

## 🔄 切り替え方法

### 基本操作

1. 画面上部のボタンをクリック
2. 表示が切り替わります
3. 自動的に保存されます

### ショートカット（計画中）

将来的には以下のショートカットを実装予定：
- `1` キー: サークル形式
- `2` キー: 水平形式
- `3` キー: 折りたたみ形式

## 🎬 動作の仕組み

技術的な詳細（開発者向け）：

```javascript
// ビューの切り替え
viewSwitcher.switchView('circle'); // サークル形式に切り替え

// 現在のビューを取得
const currentView = viewSwitcher.currentView;

// LocalStorageに保存
localStorage.setItem('preferredView', 'circle');
```

### 処理の流れ

1. ボタンがクリックされる
2. 現在の可視化をクリア（SVG、グローバル変数）
3. 新しいスクリプトを動的に読み込む
4. 新しい可視化を描画
5. 選択をLocalStorageに保存

## 📱 レスポンシブデザイン

### デスクトップ
- 3つのボタンすべてが表示
- アイコン + テキスト

### タブレット
- 3つのボタンすべてが表示
- テキストのみ（アイコンは非表示）

### スマートフォン
- 3つのボタンすべてが表示
- コンパクトなデザイン
- タッチ操作に最適化

## 🐛 トラブルシューティング

### 切り替えがうまくいかない

**症状：**
- ボタンをクリックしても表示が変わらない
- エラーメッセージが表示される

**解決方法：**
1. ページを再読み込み（F5 または Cmd+R）
2. ブラウザのキャッシュをクリア
3. 開発者ツールのコンソールでエラーを確認

### 設定が保存されない

**症状：**
- 次回訪問時に前回の形式で表示されない

**解決方法：**
1. ブラウザの設定でLocalStorageが有効か確認
2. プライベートブラウジングモードを使用していないか確認
3. ブラウザのストレージをクリアしていないか確認

### 表示が崩れる

**症状：**
- 切り替え後にレイアウトが乱れる

**解決方法：**
1. リセットボタン（🔄）をクリック
2. ページを再読み込み

## 🎓 ベストプラクティス

### 初めて使う場合
1. **サークル形式**で全体を把握
2. **水平形式**で詳細を確認
3. **折りたたみ形式**で探索

### 学習目的
1. **水平形式**で階層を理解
2. 興味のある部分をクリック
3. 詳細カードで情報を確認

### プレゼンテーション
1. **サークル形式**でインパクトのある表示
2. ズームで特定の部分を拡大
3. リセットボタンで元に戻す

## 🚀 今後の改善予定

- [ ] キーボードショートカット
- [ ] アニメーション効果の追加
- [ ] カスタムビューの保存
- [ ] 複数のビューの同時表示
- [ ] URLパラメータでの指定（共有用）

## 💡 フィードバック

この機能について：
- 使いにくい点
- 改善要望
- バグ報告

[Issues](https://github.com/your-username/microbiology-tree/issues)でお知らせください！

---

**この機能により、HTMLファイルを編集することなく、誰でも簡単に表示形式を切り替えられるようになりました！** 🎉
